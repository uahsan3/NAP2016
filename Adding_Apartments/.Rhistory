runApp('C:/Users/uahsan3/Dropbox/DSSG-ATL2016/ExperimentingWithForms')
runApp('C:/Users/uahsan3/Dropbox/DSSG-ATL2016/ExperimentingWithForms')
runApp('C:/Users/uahsan3/Dropbox/DSSG-ATL2016/ExperimentingWithForms')
runApp('GitHub/NAP2016')
runApp('GitHub/NAP2016/ExperimentingWithForms')
runApp('GitHub/NAP2016')
runApp('GitHub/NAP2016/ExperimentingWithForms')
install.packages('rdrop2')
install.packages('googlesheets')
sheet_url <- "https://docs.google.com/spreadsheets/d/1IrpR8SMU_LMM6RHuF2AuwX-bg3JUudRvNr6Wnt858dc/pub?output=csv"
sheet_ss <- gs_url(jeff_url)
sheet_ss <- gs_url(sheet_url)
library("googlesheets")
sheet_ss <- gs_url(sheet_url)
sheet_ss$sheet_key
runApp('C:/Users/uahsan3/Dropbox/DSSG-ATL2016/ExperimentingWithForms')
runApp('C:/Users/uahsan3/Dropbox/DSSG-ATL2016/ExperimentingWithForms')
sheet
sheet_url <- "https://docs.google.com/spreadsheets/d/1IrpR8SMU_LMM6RHuF2AuwX-bg3JUudRvNr6Wnt858dc/pub?output=csv"
#   sheet <- gs_url(sheet_url)
sheet_url <- "https://docs.google.com/spreadsheets/d/1IrpR8SMU_LMM6RHuF2AuwX-bg3JUudRvNr6Wnt858dc/pub?output=csv"
sheet <- gs_url(sheet_url)
gs_add_row(sheet, input = "Weee","eeee","","","500","1468095372")
gs_add_row(sheet, input = paste("Weee","eeee","","","500","1468095372")
gs_add_row(sheet, input = paste("Weee","eeee","","","500","1468095372"))
gs_add_row(sheet, input = paste("Weee","eeee","","","500","1468095372"))
runApp('C:/Users/uahsan3/Dropbox/DSSG-ATL2016/ExperimentingWithForms')
runApp('C:/Users/uahsan3/Dropbox/DSSG-ATL2016/ExperimentingWithForms')
gs_read_csv(sheet)
sheet_data <- gs_read_csv(sheet)
sheet_data$name
is.null(sheet_data$name)
is.null(sheet_data$address)
is.null("")
is.null('')
a = ''
is.null(a)
nchar(as.character(a)
nchar(as.character(a))
nchar(as.character(''))
nchar(as.character('a'))
nchar(as.character(sheet_data$name))
install.packages("ggmap")
geocode("1122 State Street NW Atlanta GA")
library("ggmap")
geocode("1122 State Street NW Atlanta GA")
lat_long <- geocode("1122 State Street NW Atlanta GA")
lat <- lat_long$lat
lon <- lat_long$lon
row_to_write <- data.frame(sheet_data$name, lat, long, "", "",
sheet_data$website, sheet_data$address, "", sheet_data$phone)
row_to_write <- data.frame(sheet_data$name, lat, lon, "", "",
sheet_data$website, sheet_data$address, "", sheet_data$phone)
row_to_write <- c(sheet_data$name, lat, lon, "", "", sheet_data$website, sheet_data$address, "", sheet_data$phone)
write.table(row_to_write, file = "Apartments.csv", append = TRUE, quote = TRUE, sep = ",",
eol = "\n", na = "NA", dec = ".", row.names = TRUE,
qmethod = c("escape", "double"), fileEncoding = "")
row_to_write
write.csv(row_to_write, file = "Apartments.csv", append = TRUE, quote = TRUE, sep = ",",
eol = "\n", na = "NA", dec = ".", row.names = TRUE,
qmethod = c("escape", "double"), fileEncoding = "")
write.csv(row_to_write, file = "Apartments.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE,
qmethod = c("double"), fileEncoding = "")
write.table(row_to_write, file = "Apartments.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE,
qmethod = c("double"), fileEncoding = "")
getwd()
write.table(row_to_write, file = "C:\Users\uahsan3\Documents\GitHub\NAP2016\ExperimentingWithForms\Apartments.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE,
qmethod = c("double"), fileEncoding = "")
write.table(t(row_to_write), file = "Apartments.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE,
qmethod = c("double"), fileEncoding = "")
write.table(t(row_to_write), file = "Apartments.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE,
qmethod = c("double"), fileEncoding = "")
write.table(t(row_to_write), file = "Apartments.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE, col.names = FALSE,
qmethod = c("double"), fileEncoding = "")
runApp('GitHub/NAP2016/Adding_Apartments')
loadData()
loadData <- function() {
# Grab the Google Sheet
sheet_url <- "https://docs.google.com/spreadsheets/d/1IrpR8SMU_LMM6RHuF2AuwX-bg3JUudRvNr6Wnt858dc/pub?output=csv"
sheet <- gs_url(sheet_url)
# Read the data
sheet_data <- gs_read_csv(sheet)
}
loadData()
sheet_data
loadData()
sheet_data <- gs_read_csv(sheet)
sheet_data$name
type(sheet_data$name)
typeof(sheet_data$name)
sheet_data$name[0]
sheet_data$name
sheet_data$address
dim(sheet_data)
sheet_data[0][1]
sheet_data[0][0]
sheet_data[0]
sheet_data[1]
sheet_data[1][1]
loadData()
sheet_data$name[1]
sheet_data$name[2]
sheet_data$name[3]
dim(sheet_data)
dim(sheet_data)[1]
dim(sheet_data)[2]
for (name in sheet_data$name) { print name}
runApp('GitHub/NAP2016/Adding_Apartments')
runApp('GitHub/NAP2016/Adding_Apartments')
sheet_data$name
sheet_data$name[dim(sheet_data)]
sheet_data$name[dim(sheet_data)[1]]
sheet_data$timestamp[dim(sheet_data)[1]]
as.POSIXct(sheet_data$timestamp[dim(sheet_data)[1]], origin="1970-01-01")
as.POSIXct(int(sheet_data$timestamp[dim(sheet_data)[1]]), origin="1970-01-01")
as.POSIXct(as.numeric(sheet_data$timestamp[dim(sheet_data)[1]]), origin="1970-01-01")
as.numeric(sheet_data$timestamp[dim(sheet_data)[1]]) - epochTime()
epochTime <- function() {
as.integer(Sys.time())
}
as.numeric(sheet_data$timestamp[dim(sheet_data)[1]]) - epochTime()
as.POSIXct(epochTime(), origin="1970-01-01")
sheet_data$timestamp
humanTime <- function() {
format(Sys.time(), "%Y%m%d-%H%M%OS")
}
humanTime
humanTime()
epochTime()
runApp('GitHub/NAP2016/Adding_Apartments')
runApp('GitHub/NAP2016/Adding_Apartments')
runApp('GitHub/NAP2016/Adding_Apartments')
runApp('GitHub/NAP2016/Adding_Apartments')
runApp('GitHub/NAP2016/Adding_Apartments')
runApp('GitHub/NAP2016/Adding_Apartments')
sheet_data$address[i]
sheet_data$address[1]
sheet_data$address[2]
sheet_data$address[3]
sheet_url <- "https://docs.google.com/spreadsheets/d/1IrpR8SMU_LMM6RHuF2AuwX-bg3JUudRvNr6Wnt858dc/pub?output=csv"
sheet <- gs_url(sheet_url)
# Read the data
sheet_data <- gs_read_csv(sheet)
sheet_data
sheet_data$address[1]
sheet_data$address[2]
runApp('GitHub/NAP2016/Adding_Apartments')
runApp('GitHub/NAP2016/Adding_Apartments')
runApp('GitHub/NAP2016/Adding_Apartments')
runApp('GitHub/NAP2016/Adding_Apartments')
runApp('GitHub/NAP2016/Adding_Apartments')
sheet_data
loadData()
sheet_data
sheet_data <- gs_read_csv(sheet)
sheet_data
loadData()
loadData()
sheet_data
apartments <- read.csv("apartments_added.csv")
apartments <- read.csv("Apartments.csv")
getwd()
setwd('GitHub/NAP2016/Adding_Apartments/')
apartments <- read.csv("Apartments.csv")
to_write <- unique(apartments)
write.table(t(to_write), file = "../Apartments_backup.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE, col.names = FALSE,
qmethod = c("double"), fileEncoding = "")
setwd('..')
write.table(t(to_write), file = "../Apartments_backup.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE, col.names = FALSE,
qmethod = c("double"), fileEncoding = "")
write.table(t(to_write), file = "../Apartments_backup.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE, col.names = FALSE,
qmethod = c("double"), fileEncoding = "")
write.table(t(to_write), file = "Apartments_backup.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE, col.names = FALSE,
qmethod = c("double"), fileEncoding = "")
write.table(t(to_write), file = "Apartments_backup.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE, col.names = FALSE,
qmethod = c("double"), fileEncoding = "")
write.table(to_write, file = "Apartments_backup.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE, col.names = FALSE,
qmethod = c("double"), fileEncoding = "")
getwd()
file.exists("Apartments.csv")
setwd('C:/Users/uahsan3/Documents/GitHub/NAP2016/Adding_Apartments')
file.exists("Apartments.csv")
filename <-  paste(apt_folder, "Apartments.csv", sep = '/')
apt_folder <- paste(getwd(), 'Adding_Apartments', sep='/')
filename <-  paste(apt_folder, "Apartments.csv", sep = '/')
fielname
filename
file.exists(filename)
if file.exists(filename){ print "hello"}
qmethod = c("double"), fileEncoding = "")
runApp('~/GitHub/NAP2016')
runApp('~/GitHub/NAP2016')
runApp('~/GitHub/NAP2016')
runApp('~/GitHub/NAP2016')
runApp()
runApp('~/GitHub/NAP2016')
runApp()
runApp()
runApp()
install.packages('rdrop2')
library(rdrop2)
drop_auth()
drop_dir()
library(rdrop2)
drop_auth()
runApp('C:/Users/uahsan3/Dropbox/NAP2016/Adding_Apartments')
outputDir <- paste(getwd(), "responses", sep='/')
outputDir
runApp('C:/Users/uahsan3/Dropbox/NAP2016/Adding_Apartments')
runApp('C:/Users/uahsan3/Dropbox/NAP2016/Adding_Apartments')
outputDir
data
runApp('C:/Users/uahsan3/Dropbox/NAP2016/Adding_Apartments')
clear
clc
runApp()
loadData()
sheet_data
loadData()
loadData <- function() {
# Grab the Google Sheet
sheet_url <- "https://docs.google.com/spreadsheets/d/1IrpR8SMU_LMM6RHuF2AuwX-bg3JUudRvNr6Wnt858dc/pub?output=csv"
sheet <- gs_url(sheet_url)
# Read the data
sheet_data <- gs_read_csv(sheet, skip=1)
sheet_data
}
loadData()
runApp()
runApp('C:/Users/uahsan3/Dropbox/NAP2016/Adding_Apartments')
outputDir <- paste(getwd(), "responses", sep='/')
outputDir
runApp('C:/Users/uahsan3/Dropbox/NAP2016/Adding_Apartments')
library(rdrop2)
drop_auth()
runApp('C:/Users/uahsan3/Dropbox/NAP2016/Adding_Apartments')
shiny::runApp()
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
sheet_url <- "https://docs.google.com/spreadsheets/d/1IrpR8SMU_LMM6RHuF2AuwX-bg3JUudRvNr6Wnt858dc/pub?output=csv"
sheet <- gs_url(sheet_url)
# Read the data
sheet_data <- gs_read_csv(sheet, skip=1)
num_apt = dim(sheet_data)[1]
for (i in 2:num_apt){
# Access the address - it is guaranteed to be there as it was mandatory field
apt_address <- sheet_data$address[i]
# Geocode address -
lat_long <- geocode(apt_address)
lat <- lat_long$lat
lon <- lat_long$lon
# Append the whole line to the Apartments csv file
# These are the fields in the CSV: apartment_name,latitude,longitude
# place_id,	zipcode, website,	property_address,	map_url,	phone
row_to_write <- c(sheet_data$name[i], lat, lon, "", "",
sheet_data$website[i], sheet_data$address[i], "", sheet_data$phone[i])
write.table(t(row_to_write), file = "apartments_added.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE, col.names = FALSE,
qmethod = c("double"), fileEncoding = "")
}
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
rsconnect::showLogs()
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
devtools::install_github("jennybc/gspreadr", ref = "no-need-token-public-visibility")
my_sheet <- gs_title("Apartment Updates - Responses - NAP")
my_sheet
gs_url()
gs_url(my_sheet)
my_sheet$sheet_key
my_sheet$is_public
gs_key(my_sheet$sheet_key)
sheet <- gs_url(my_sheet$browser_url)
runApp('~/GitHub/NAP2016/Adding_Apartments')
runApp('~/GitHub/NAP2016/Adding_Apartments')
getwd()
setwd('C:/Users/uahsan3/Documents/GitHub/NAP2016/Adding_Apartments/')
getwd()
runApp()
runApp()
setwd("~/GitHub/NAP2016/Adding_Apartments")
runApp()
getwd()
library("googlesheets")
sheet_url <- "https://docs.google.com/spreadsheets/d/1IrpR8SMU_LMM6RHuF2AuwX-bg3JUudRvNr6Wnt858dc/pub?output=csv"
sheet <- gs_url(sheet_url)
getwd(0)
getwd()
library("googlesheets")
sheet_url <- "https://docs.google.com/spreadsheets/d/1IrpR8SMU_LMM6RHuF2AuwX-bg3JUudRvNr6Wnt858dc/pub?output=csv"
sheet <- gs_url(sheet_url)
shiny::runApp()
runApp()
runApp()
gs_auth()
options("httr_oauth_cache" = "gs_auth")
library(googlesheets)
gs_auth()
runApp()
gs_auth(new_user=TRUE)
runApp()
options("googlesheets.httr_oauth_cache" = "gs_auth")
gs_auth()
gs_auth(new_user=TRUE)
runApp()
options("googlesheets.httr_oauth_cache" = "gs_auth")
gs_auth(new_user=TRUE)
options("googlesheets.httr_oauth_cache" = "gs_auth")
gs_auth(new_user=TRUE)
runApp()
gs_auth(new_user=TRUE)
gs_auth()
options("googlesheets.httr_oauth_cache" = "gs_auth")
runApp()
runApp()
rsconnect::deployApp()
runApp()
runApp()
rsconnect::deployApp()
runApp()
runApp()
rsconnect::deployApp()
runApp()
rsconnect::deployApp()
runApp()
runApp('~/GitHub/NAP2016')
runApp()
rsconnect::deployApp()
runApp()
runApp()
rsconnect::deployApp()
runApp('~/GitHub/NAP2016')
runApp('~/GitHub/NAP2016')
runApp('~/GitHub/NAP2016')
runApp('~/GitHub/NAP2016')
runApp('~/GitHub/NAP2016')
for (i in 2:num_apt){
num_apt = dim(sheet_data)[1] # this is the number of entries per column
#num_col = dim(sheet_data)[2] # this is the number of columns [they remain constant]
for (i in 2:num_apt){
# Access the address - it is guaranteed to be there as it was mandatory field
apt_address <- sheet_data$address[i]
# Geocode address -
lat_long <- geocode(apt_address)
lat <- lat_long$lat
lon <- lat_long$lon
# Append the whole line to the Apartments csv file
# These are the fields in the CSV: apartment_name,latitude,longitude
# place_id,	zipcode, website,	property_address,	map_url,	phone
row_to_write <- c(sheet_data$name[i], lat, lon, "", "",
sheet_data$website[i], sheet_data$address[i], "", sheet_data$phone[i])
write.table(t(row_to_write), file = "apartments_added.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE, col.names = FALSE,
qmethod = c("double"), fileEncoding = "")
}
source('~/GitHub/NAP2016/Adding_Apartments/updateApt.R')
# Read the data
library("ggmap")
sheet_url <- "https://docs.google.com/spreadsheets/d/1IrpR8SMU_LMM6RHuF2AuwX-bg3JUudRvNr6Wnt858dc/pub?output=csv"
_
sheet <- gs_url(sheet_url)
sheet <- gs_url(sheet_url)
library("googlesheets")
sheet <- gs_url(sheet_url)
sheet_data <- gs_read_csv(sheet)
num_apt = dim(sheet_data)[1] # this is the number of entries per column
for (i in 2:num_apt){
# Access the address - it is guaranteed to be there as it was mandatory field
apt_address <- sheet_data$address[i]
# Geocode address -
lat_long <- geocode(apt_address)
lat <- lat_long$lat
lon <- lat_long$lon
# Append the whole line to the Apartments csv file
# These are the fields in the CSV: apartment_name,latitude,longitude
# place_id,	zipcode, website,	property_address,	map_url,	phone
row_to_write <- c(sheet_data$name[i], lat, lon, "", "",
sheet_data$website[i], sheet_data$address[i], "", sheet_data$phone[i])
write.table(t(row_to_write), file = "apartments_added.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE, col.names = FALSE,
qmethod = c("double"), fileEncoding = "")
}
apt_address
sheet_data$address
dim(sheet_data)[1]
if (num_apt > 1) {
for (i in 2:num_apt){
# Access the address - it is guaranteed to be there as it was mandatory field
apt_address <- sheet_data$address[i]
# Geocode address -
lat_long <- geocode(apt_address)
lat <- lat_long$lat
lon <- lat_long$lon
# Append the whole line to the Apartments csv file
# These are the fields in the CSV: apartment_name,latitude,longitude
# place_id,	zipcode, website,	property_address,	map_url,	phone
row_to_write <- c(sheet_data$name[i], lat, lon, "", "",
sheet_data$website[i], sheet_data$address[i], "", sheet_data$phone[i])
write.table(t(row_to_write), file = "apartments_added.csv", append = TRUE, quote = FALSE, sep = ",",
eol = "\n", na = "", dec = ".", row.names = FALSE, col.names = FALSE,
qmethod = c("double"), fileEncoding = "")
}
}
shiny::runApp('~/GitHub/NAP2016')
file.exists(filename1)
apartments <- read.csv(filename)
runApp('~/GitHub/NAP2016')
dim[apartments]
apt_folder <- paste(getwd(), 'Adding_Apartments', sep='/')
a
apartments <- read.csv(filename1)
file.info(filename1)$size
file.info(filename1)$size == 0
runApp('~/GitHub/NAP2016')
runApp('~/GitHub/NAP2016')
runApp('~/GitHub/NAP2016')
source('~/GitHub/NAP2016/Adding_Apartments/updateApt.R')
num_apt
apt_file <- paste(getwd(), 'Adding_Apartments', 'apartments_added.csv', sep='/')
apt_file
getwd()
setwd(..)
setwd("C:/Users/uahsan3/Documents/GitHub/NAP2016/")
apt_file <- paste(getwd(), 'Adding_Apartments', 'apartments_added.csv', sep='/')
apt_file
source('~/GitHub/NAP2016/readData.R')
file.exists(apt_file)
apt_file
runApp()
to_write
Apartments_tmp <- rbind(Apartments_initial,to_write)
runApp()
runApp()
source('~/GitHub/NAP2016/Adding_Apartments/updateApt.R')
runApp()
runApp()
rsconnect::deployApp()
rsconnect::deployApp()
runApp('Adding_Apartments')
runApp('Adding_Apartments')
runApp()
runApp()
rsconnect::deployApp()
runApp()
runApp()
runApp()
runApp('Adding_Apartments')
rsconnect::deployApp()
setwd('C:\Users\uahsan3\Documents\GitHub\NAP2016\Adding_Apartments')
setwd("~/GitHub/NAP2016/Adding_Apartments")
rsconnect::deployApp()
loadData <- function() {
# Grab the Google Sheet
sheet_url <- "https://docs.google.com/spreadsheets/d/1IrpR8SMU_LMM6RHuF2AuwX-bg3JUudRvNr6Wnt858dc/pub?output=csv"
sheet <- gs_url(sheet_url)
# Read the data
sheet_data <- gs_read_csv(sheet)
sheet_data
# Now figure out if multiple apartments have been added by checking the length of sheet_data
num_apt = dim(sheet_data)[1] # this is the number of entries per column
#num_col = dim(sheet_data)[2] # this is the number of columns [they remain constant]
# Declare empty data frame
apartments = data.frame(matrix(vector(), 0, 9,
dimnames=list(c(), c("apartment_name","latitude","longitude",
"place_id",	"zipcode", "website",	"property_address",	"map_url",	"phone"))),
stringsAsFactors=F)
if (num_apt > 1) {
for (i in 2:num_apt){
# Access the address - it is guaranteed to be there as it was mandatory field
apt_address <- sheet_data$address[i]
# Geocode address -
lat_long <- geocode(apt_address)
lat <- lat_long$lat
lon <- lat_long$lon
# Append the whole line to the Apartments csv file
# These are the fields in the CSV: apartment_name,latitude,longitude
# place_id,	zipcode, website,	property_address,	map_url,	phone
row_to_write <- c(sheet_data$name[i], lat, lon, "", "",
sheet_data$website[i], sheet_data$address[i], "", sheet_data$phone[i])
apartments <- rbind(df, row_to_write)
}
}
apartments
}
loadData()
loadData() # Load updated Apartments from Google Sheets
num_apt > 1
